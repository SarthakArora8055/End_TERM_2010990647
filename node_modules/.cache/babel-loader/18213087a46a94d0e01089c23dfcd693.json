{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jains\\\\Downloads\\\\project_e_commerce-main\\\\project_e_commerce-main\\\\src\\\\components\\\\CheckoutForm\\\\Checkout\\\\Checkout.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { CssBaseline, Paper, Stepper, Step, StepLabel, Typography, CircularProgress, Divider, Button } from '@material-ui/core';\nimport { Link, useHistory } from 'react-router-dom';\nimport { commerce } from '../../../lib/commerce';\nimport AddressForm from '../AddressForm';\nimport PaymentForm from '../PaymentForm';\nimport useStyles from './styles';\nconst steps = ['Shipping address', 'Payment details'];\nconst Checkout = _ref => {\n  let {\n    cart,\n    onCaptureCheckout,\n    order,\n    error\n  } = _ref;\n  const [checkoutToken, setCheckoutToken] = useState(null);\n  const [activeStep, setActiveStep] = useState(0);\n  const [shippingData, setShippingData] = useState({});\n  const classes = useStyles();\n  const history = useHistory();\n  const nextStep = () => setActiveStep(prevActiveStep => prevActiveStep + 1);\n  const backStep = () => setActiveStep(prevActiveStep => prevActiveStep - 1);\n  useEffect(() => {\n    if (cart.id) {\n      const generateToken = async () => {\n        try {\n          const token = await commerce.checkout.generateToken(cart.id, {\n            type: 'cart'\n          });\n          setCheckoutToken(token);\n        } catch {\n          if (activeStep !== steps.length) history.push('/');\n        }\n      };\n      generateToken();\n    }\n  }, [cart]);\n  const test = data => {\n    setShippingData(data);\n    nextStep();\n  };\n  let Confirmation = () => order.customer ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, \"Thank you for your purchase, \", order.customer.firstname, \" \", order.customer.lastname, \"!\"), /*#__PURE__*/React.createElement(Divider, {\n    className: classes.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, \"Order ref: \", order.customer_reference)), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    component: Link,\n    variant: \"outlined\",\n    type: \"button\",\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, \"Back to home\")) : /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.spinner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }));\n  if (error) {\n    Confirmation = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, \"Error: \", error), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      component: Link,\n      variant: \"outlined\",\n      type: \"button\",\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }\n    }, \"Back to home\"));\n  }\n  const Form = () => activeStep === 0 ? /*#__PURE__*/React.createElement(AddressForm, {\n    checkoutToken: checkoutToken,\n    nextStep: nextStep,\n    setShippingData: setShippingData,\n    test: test,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }) : /*#__PURE__*/React.createElement(PaymentForm, {\n    checkoutToken: checkoutToken,\n    nextStep: nextStep,\n    backStep: backStep,\n    shippingData: shippingData,\n    onCaptureCheckout: onCaptureCheckout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.toolbar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    className: classes.layout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h4\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, \"Checkout\"), /*#__PURE__*/React.createElement(Stepper, {\n    activeStep: activeStep,\n    className: classes.stepper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, steps.map(label => /*#__PURE__*/React.createElement(Step, {\n    key: label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(StepLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, label)))), activeStep === steps.length ? /*#__PURE__*/React.createElement(Confirmation, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 42\n    }\n  }) : checkoutToken && /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 78\n    }\n  }))));\n};\nexport default Checkout;","map":{"version":3,"names":["React","useState","useEffect","CssBaseline","Paper","Stepper","Step","StepLabel","Typography","CircularProgress","Divider","Button","Link","useHistory","commerce","AddressForm","PaymentForm","useStyles","steps","Checkout","cart","onCaptureCheckout","order","error","checkoutToken","setCheckoutToken","activeStep","setActiveStep","shippingData","setShippingData","classes","history","nextStep","prevActiveStep","backStep","id","generateToken","token","checkout","type","length","push","test","data","Confirmation","customer","firstname","lastname","divider","customer_reference","spinner","Form","toolbar","layout","paper","stepper","map","label"],"sources":["C:/Users/jains/Downloads/project_e_commerce-main/project_e_commerce-main/src/components/CheckoutForm/Checkout/Checkout.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { CssBaseline, Paper, Stepper, Step, StepLabel, Typography, CircularProgress, Divider, Button } from '@material-ui/core';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { commerce } from '../../../lib/commerce';\nimport AddressForm from '../AddressForm';\nimport PaymentForm from '../PaymentForm';\nimport useStyles from './styles';\n\nconst steps = ['Shipping address', 'Payment details'];\n\nconst Checkout = ({ cart, onCaptureCheckout, order, error }) => {\n  const [checkoutToken, setCheckoutToken] = useState(null);\n  const [activeStep, setActiveStep] = useState(0);\n  const [shippingData, setShippingData] = useState({});\n  const classes = useStyles();\n  const history = useHistory();\n\n  const nextStep = () => setActiveStep((prevActiveStep) => prevActiveStep + 1);\n  const backStep = () => setActiveStep((prevActiveStep) => prevActiveStep - 1);\n\n  useEffect(() => {\n    if (cart.id) {\n      const generateToken = async () => {\n        try {\n          const token = await commerce.checkout.generateToken(cart.id, { type: 'cart' });\n\n          setCheckoutToken(token);\n        } catch {\n          if (activeStep !== steps.length) history.push('/');\n        }\n      };\n\n      generateToken();\n    }\n  }, [cart]);\n\n  const test = (data) => {\n    setShippingData(data);\n\n    nextStep();\n  };\n\n  let Confirmation = () => (order.customer ? (\n    <>\n      <div>\n        <Typography variant=\"h5\">Thank you for your purchase, {order.customer.firstname} {order.customer.lastname}!</Typography>\n        <Divider className={classes.divider} />\n        <Typography variant=\"subtitle2\">Order ref: {order.customer_reference}</Typography>\n      </div>\n      <br />\n      <Button component={Link} variant=\"outlined\" type=\"button\" to=\"/\">Back to home</Button>\n    </>\n  ) : (\n    <div className={classes.spinner}>\n      <CircularProgress />\n    </div>\n  ));\n\n  if (error) {\n    Confirmation = () => (\n      <>\n        <Typography variant=\"h5\">Error: {error}</Typography>\n        <br />\n        <Button component={Link} variant=\"outlined\" type=\"button\" to=\"/\">Back to home</Button>\n      </>\n    );\n  }\n\n  const Form = () => (activeStep === 0\n    ? <AddressForm checkoutToken={checkoutToken} nextStep={nextStep} setShippingData={setShippingData} test={test} />\n    : <PaymentForm checkoutToken={checkoutToken} nextStep={nextStep} backStep={backStep} shippingData={shippingData} onCaptureCheckout={onCaptureCheckout} />);\n\n  return (\n    <>\n      <CssBaseline />\n      <div className={classes.toolbar} />\n      <main className={classes.layout}>\n        <Paper className={classes.paper}>\n          <Typography variant=\"h4\" align=\"center\">Checkout</Typography>\n          <Stepper activeStep={activeStep} className={classes.stepper}>\n            {steps.map((label) => (\n              <Step key={label}>\n                <StepLabel>{label}</StepLabel>\n              </Step>\n            ))}\n          </Stepper>\n          {activeStep === steps.length ? <Confirmation /> : checkoutToken && <Form />}\n        </Paper>\n      </main>\n    </>\n  );\n};\n\nexport default Checkout;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}